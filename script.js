const translations = {
    en: {
        "agency-title": "Travel+ Agency",
        "agency-subtitle": "Discover the world with our exclusive travel experiences",
        "nav-trips": "Trips",
        "nav-offers": "Offers",
        "nav-hotels": "Hotels",
        "nav-packages": "Packages",
        "nav-cruises": "Cruises",
        "welcome-title": "Welcome to Travel+",
        "welcome-text": "Discover your next adventure with our exclusive travel experiences. Special promotion: 20% off all packages! Limited time offer - expires soon. Click on any category above to explore our offerings.",
        "modal-trips-title": "Trips",
        "modal-trips-text": "Explore our curated selection of adventure trips to breathtaking destinations around the globe.",
        "booking-title": "Booking Details",
        "length-stay-label": "Length of Stay (nights):",
        "num-people-label": "Number of People:",
        "nights-label": "Nights:",
        "transport-label": "Transportation:",
        "total-price": "Total Price: $",
        "proceed-checkout": "Proceed to Checkout",
        "user-title": "Create Account",
        "name-label": "Full Name:",
        "email-label": "Email:",
        "password-label": "Password:",
        "confirm-label": "Confirm Password:",
        "create-account": "Create Account",
        "login-text": "Already have an account? <a href='#' onclick='toggleLogin()'>Login</a>",
        "checkout-title": "Checkout",
        "booking-summary": "Booking Summary",
        "card-number-label": "Card Number:",
        "expiry-label": "Expiry Date:",
        "cvv-label": "CVV:",
        "billing-label": "Billing Address:",
        "complete-booking": "Complete Booking",
        "footer-contact": "Contact Us",
        "footer-follow": "Follow Us",
        "footer-language": "Language",
        "footer-copyright": "© 2025 Travel+ Agency. All rights reserved.",
        "signup-btn": "Sign Up / Login",
        "promotions-title": "Special Promotions",
        "promo1-title": "20% Off All Packages",
        "promo1-desc": "Book any travel package and save 20%. Valid for bookings made before December 31st.",
        "promo2-title": "Free Hotel Upgrade",
        "promo2-desc": "Stay 7 nights or more and get a free room upgrade. Limited availability.",
        "promo3-title": "Family Discount",
        "promo3-desc": "Families of 4 or more save 25% on all destinations. Kids under 12 stay free.",
        "promo4-title": "Early Bird Special",
        "promo4-desc": "Book 6 months in advance and receive complimentary airport transfers.",
        "europe-title": "European Adventure",
        "europe-desc": "Visit Paris, Rome, and Barcelona in one unforgettable journey. From $2,500 per person.",
        "asia-title": "Asian Discovery",
        "asia-desc": "Immerse yourself in the cultures of Tokyo, Bangkok, and Bali. From $3,200 per person.",
        "africa-title": "African Safari",
        "africa-desc": "Experience the wildlife of Kenya and Tanzania on an epic safari. From $4,000 per person.",
        "america-title": "American Road Trip",
        "america-desc": "Drive through the stunning landscapes of the USA, from coast to coast. From $1,800 per person."
    },
    es: {
        "agency-title": "Agencia Travel+",
        "agency-subtitle": "Descubre el mundo con nuestras experiencias de viaje exclusivas",
        "nav-trips": "Viajes",
        "nav-offers": "Ofertas",
        "nav-hotels": "Hoteles",
        "nav-packages": "Paquetes",
        "nav-cruises": "Cruceros",
        "welcome-title": "Bienvenido a Travel+",
        "welcome-text": "Descubre tu próxima aventura con nuestras experiencias de viaje exclusivas. ¡Promoción especial: 20% de descuento en todos los paquetes! Oferta limitada - expira pronto. Haz clic en cualquier categoría arriba para explorar nuestras ofertas.",
        "modal-trips-title": "Viajes",
        "modal-trips-text": "Explora nuestra selección curada de viajes de aventura a destinos impresionantes alrededor del mundo.",
        "booking-title": "Detalles de Reserva",
        "length-stay-label": "Duración de la Estadía (noches):",
        "num-people-label": "Número de Personas:",
        "nights-label": "Noches:",
        "transport-label": "Transporte:",
        "total-price": "Precio Total: $",
        "proceed-checkout": "Proceder al Pago",
        "user-title": "Crear Cuenta",
        "name-label": "Nombre Completo:",
        "email-label": "Correo Electrónico:",
        "password-label": "Contraseña:",
        "confirm-label": "Confirmar Contraseña:",
        "create-account": "Crear Cuenta",
        "login-text": "¿Ya tienes una cuenta? <a href='#' onclick='toggleLogin()'>Iniciar Sesión</a>",
        "checkout-title": "Pago",
        "booking-summary": "Resumen de Reserva",
        "card-number-label": "Número de Tarjeta:",
        "expiry-label": "Fecha de Expiración:",
        "cvv-label": "CVV:",
        "billing-label": "Dirección de Facturación:",
        "complete-booking": "Completar Reserva",
        "footer-contact": "Contáctanos",
        "footer-follow": "Síguenos",
        "footer-language": "Idioma",
        "footer-copyright": "© 2025 Agencia Travel+. Todos los derechos reservados.",
        "signup-btn": "Registrarse / Iniciar Sesión",
        "promotions-title": "Promociones Especiales",
        "promo1-title": "20% de Descuento en Todos los Paquetes",
        "promo1-desc": "Reserva cualquier paquete de viaje y ahorra 20%. Válido para reservas realizadas antes del 31 de diciembre.",
        "promo2-title": "Actualización Gratuita de Hotel",
        "promo2-desc": "Quédate 7 noches o más y obtén una actualización gratuita de habitación. Disponibilidad limitada.",
        "promo3-title": "Descuento Familiar",
        "promo3-desc": "Familias de 4 o más ahorran 25% en todos los destinos. Niños menores de 12 se hospedan gratis.",
        "promo4-title": "Especial de Reserva Temprana",
        "promo4-desc": "Reserva con 6 meses de anticipación y recibe traslados gratuitos al aeropuerto.",
        "europe-title": "Aventura Europea",
        "europe-desc": "Visita París, Roma y Barcelona en un viaje inolvidable. Desde $2,500 por persona.",
        "asia-title": "Descubrimiento Asiático",
        "asia-desc": "Sumérgete en las culturas de Tokio, Bangkok y Bali. Desde $3,200 por persona.",
        "africa-title": "Safari Africano",
        "africa-desc": "Experimenta la vida silvestre de Kenia y Tanzania en un safari épico. Desde $4,000 por persona.",
        "america-title": "Viaje por Carretera Americana",
        "america-desc": "Conduce por los paisajes impresionantes de EE.UU., de costa a costa. Desde $1,800 por persona."
    }
};

function showSection(sectionId) {
    // Open the modal
    document.getElementById('modal-' + sectionId).style.display = 'block';
}

function showAllSections() {
    // Show all sections (for homepage)
    const sections = document.querySelectorAll('main section');
    sections.forEach(section => {
        section.style.display = 'block';
    });
}

function closeModal(modalId) {
    document.getElementById(modalId).style.display = 'none';
}

function openBookingModal(card) {
    const price = card.getAttribute('data-price');
    const people = card.getAttribute('data-people');
    const nights = card.getAttribute('data-nights');
    const transport = card.getAttribute('data-transport');

    const lengthStayEl = document.getElementById('length-stay');
    const numPeopleEl = document.getElementById('num-people');
    const nightsEl = document.getElementById('nights');
    const transportEl = document.getElementById('transport');
    const priceDisplayEl = document.getElementById('price-display');

    if (lengthStayEl) lengthStayEl.value = nights;
    if (numPeopleEl) numPeopleEl.value = people;
    if (nightsEl) nightsEl.value = nights;
    if (transportEl) transportEl.value = transport;
    if (priceDisplayEl) priceDisplayEl.textContent = price;

    // Close all category modals before opening booking
    const categoryModals = ['modal-trips', 'modal-offers', 'modal-hotels', 'modal-packages', 'modal-cruises'];
    categoryModals.forEach(modalId => {
        const modal = document.getElementById(modalId);
        if (modal) modal.style.display = 'none';
    });

    const bookingModal = document.getElementById('booking-modal');
    if (bookingModal) bookingModal.style.display = 'block';
}

function openUserModal() {
    document.getElementById('user-modal').style.display = 'block';
}

function openPromotionsModal() {
    document.getElementById('promotions-modal').style.display = 'block';
}

function toggleLogin() {
    // For simplicity, just alert. In real app, toggle form fields
    alert('Login functionality would be implemented here');
}

function proceedToCheckout() {
    try {
        // Get booking details
        const lengthStay = document.getElementById('length-stay').value;
        const numPeople = document.getElementById('num-people').value;
        const nights = document.getElementById('nights').value;
        const transport = document.getElementById('transport').value;
        const price = document.getElementById('price-display').textContent;

        // Get current language
        const lang = document.documentElement.lang || 'en';

        // Populate checkout summary with translations
        const summary = `
            ${translations[lang]['length-stay-label'].replace(':', '')}: ${lengthStay} nights<br>
            ${translations[lang]['num-people-label'].replace(':', '')}: ${numPeople}<br>
            ${translations[lang]['nights-label'].replace(':', '')}: ${nights}<br>
            ${translations[lang]['transport-label'].replace(':', '')}: ${transport}<br>
            ${translations[lang]['total-price'].replace('$', '')}: $${price}
        `;
        document.getElementById('summary-details').innerHTML = summary;

        // Close booking modal and open checkout
        closeModal('booking-modal');
        document.getElementById('checkout-modal').style.display = 'block';
    } catch (e) {
        console.error('Error in proceedToCheckout:', e);
    }
}

function setLanguage(lang) {
    try {
        // Remove active class from all buttons
        const buttons = document.querySelectorAll('.lang-btn');
        buttons.forEach(btn => {
            if (btn) btn.classList.remove('active');
        });

        // Add active class to selected button
        if (event && event.target) {
            event.target.classList.add('active');
        }

        // Set document language
        if (document.documentElement) {
            document.documentElement.lang = lang;
        }

        // Update all elements with data-key
        const elements = document.querySelectorAll('[data-key]');
        elements.forEach(element => {
            if (element) {
                const key = element.getAttribute('data-key');
                if (key && translations[lang] && translations[lang][key]) {
                    element.innerHTML = translations[lang][key];
                }
            }
        });

        console.log('Language set to:', lang);
    } catch (e) {
        console.error('Error in setLanguage:', e);
    }
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    });
}

// Close modal with ESC key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
            modal.style.display = 'none';
        });
    }
});

// Show welcome by default
document.addEventListener('DOMContentLoaded', function() {
    // No default modal open
});